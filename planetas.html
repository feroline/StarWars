<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Planetas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"
      type="text/javascript"
    ></script>
  </head>
  <body>
    <div class="row">
        <div class="col">
           <button id="botao" type="submit">Buscar Planetas</button>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div id="enviar" class="list-group">
            <!--será criado aqui-->
            </div>
        </div>
        <div class="col">
            <div id="result">
        </div>
    </div>
    
  </body>
  <script type="text/javascript">
    $(document).ready(function() {
      $("#botao").on("click", function(e) {
        e.preventDefault();
        $.ajax({
          url: "https://swapi.co/api/planets/?format=json",
          type: "get",
          contentType: JSON,

          success: function(response) {
            if (response == "401") {
              console.error("Requisição Inválida");
            } else {
              // console.log(response);
              $.each(response.results, function() {
                // console.log(this.rotation_period);

                this.id = this.name;

                $("#enviar").append(
                  '<a href="#" class="stretched-link list-group-item list-group-item-dark teste" id="' +
                    this.url +
                    ' " >' +
                    this.name +
                    "</a>"
                );
              });
            }
          }
        });
      });
    });

    $(document).on("click", ".teste", function(e) {
        console.log(this.id)
      $.ajax({
        url: this.id,
        type: "get",
        contentType: JSON,
        success: function(response) {
          if (response == "401") {
            console.error("Requisição Inválida");
          } else {
              console.log(response)
            $("#result").html(
                `
                <span> ${response.name} ${response.climate}  </span>
                <span> ${response.terrain} </span>
                ` 
            );
          }
        }
      });
    });
  </script>
</html>
